DEBUG=true
SECRET_KEY=change-me
ALLOWED_HOSTS=*
DEFAULT_TIMEZONE=UTC
USE_SQLITE=false

POSTGRES_USER=mastertrading
POSTGRES_PASSWORD=mastertrading
POSTGRES_DB=mastertrading
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

REDIS_URL=redis://redis:6379/0

EXCHANGE=kucoin
BINANCE_API_KEY=
BINANCE_API_SECRET=
BINANCE_TESTNET=true
BINGX_API_KEY=
BINGX_API_SECRET=
BINGX_API_PASSPHRASE=
BINGX_SANDBOX=false
BINGX_MARGIN_MODE=cross
BINGX_LEVERAGE=3
BINGX_API_LABEL=
KUCOIN_API_KEY=
KUCOIN_API_SECRET=
KUCOIN_API_PASSPHRASE=
KUCOIN_SANDBOX=true

MAX_LEVERAGE=5
RISK_PER_TRADE=0.01
DAILY_DD_LIMIT=0.05

MODE=paper
MARKETDATA_POLL_INTERVAL=15
TRADING_ENABLED=false
ORDER_SIZE_USDT=1.0
MIN_EQUITY_USDT=5.0
TAKE_PROFIT_PCT=0.01
STOP_LOSS_PCT=0.005
TAKE_PROFIT_DYNAMIC_MULT=0.90
TAKE_PROFIT_MIN_PCT=0.006
MAX_SPREAD_BPS=20
PER_INSTRUMENT_MAX_SPREAD_BPS={}
SPREAD_DYNAMIC_BY_ATR_ENABLED=true
SPREAD_ATR_RELAX_FACTOR=0.12
MAX_DYNAMIC_SPREAD_BPS=60
MAX_EFF_LEVERAGE=3.0
ORDER_MARGIN_BUFFER_PCT=0.03
ATR_MULT_TP=3.0
ATR_MULT_SL=1.5
ENTRY_VOLUME_FILTER_ENABLED=false
ENTRY_VOLUME_FILTER_TIMEFRAME=5m
ENTRY_VOLUME_FILTER_LOOKBACK=48
ENTRY_VOLUME_FILTER_MIN_RATIO=0.75
# Optional per-session override (JSON): asia, london, ny, overlap, dead
ENTRY_VOLUME_FILTER_MIN_RATIO_BY_SESSION={}
ENTRY_VOLUME_FILTER_FAIL_OPEN=true
MIN_SIGNAL_SCORE=0.80
EXECUTION_MIN_SIGNAL_SCORE=0.80
ML_ENTRY_FILTER_ENABLED=false
ML_ENTRY_FILTER_MODEL_PATH=/app/tmp/entry_filter_model.json
ML_ENTRY_FILTER_MODEL_DIR=/app/tmp/entry_filter_models
ML_ENTRY_FILTER_MIN_PROB=0.52
ML_ENTRY_FILTER_FAIL_OPEN=true
ML_ENTRY_FILTER_PER_SYMBOL_ENABLED=false
ML_ENTRY_FILTER_PER_SYMBOLS=BTCUSDT,ETHUSDT,XRPUSDT,DOGEUSDT,ADAUSDT,LINKUSDT,SOLUSDT
ML_ENTRY_FILTER_PER_SYMBOL_MIN_SAMPLES=50
ML_ENTRY_FILTER_PER_SYMBOL_FALLBACK_GLOBAL=true
ML_ENTRY_FILTER_PER_STRATEGY_ENABLED=false
ML_ENTRY_FILTER_PER_STRATEGIES=alloc_long,alloc_short
ML_ENTRY_FILTER_PER_STRATEGY_FALLBACK_GLOBAL=true
ML_ENTRY_FILTER_PER_STRATEGY_MIN_SAMPLES=80
ML_ENTRY_FILTER_PER_SYMBOL_STRATEGY_MIN_SAMPLES=40
ML_ENTRY_FILTER_AUTO_TRAIN_ENABLED=false
ML_ENTRY_FILTER_RETRAIN_ON_OPERATION_ENABLED=false
ML_ENTRY_FILTER_RETRAIN_ON_OPERATION_MIN_INTERVAL_SECONDS=0
ML_ENTRY_FILTER_AUTO_APPLY_THRESHOLD=true
ML_ENTRY_FILTER_TRAIN_DAYS=21
ML_ENTRY_FILTER_TRAIN_SOURCE=mixed
ML_ENTRY_FILTER_TRAIN_BACKTEST_DAYS=180
ML_ENTRY_FILTER_TRAIN_MIN_SAMPLES=120
ML_ENTRY_FILTER_TRAIN_EPOCHS=1200
ML_ENTRY_FILTER_TRAIN_LR=0.05
ML_ENTRY_FILTER_TRAIN_L2=0.001
ML_ENTRY_FILTER_AUTO_TRAIN_HOUR=0
ML_ENTRY_FILTER_AUTO_TRAIN_MINUTE=20
ML_TRAINING_QUEUE=ml
EXECUTION_LOCK_ENABLED=true
EXECUTION_LOCK_KEY=lock:execute_orders
EXECUTION_LOCK_TTL_SECONDS=90
VOL_FAST_EXIT_ENABLED=false
VOL_FAST_EXIT_ATR_PCT=0.012
VOL_FAST_EXIT_TP_MULT=0.75
VOL_FAST_EXIT_MIN_TP_PCT=0.006
VOL_FAST_EXIT_TRAIL_R_MULT=0.75
VOL_FAST_EXIT_PARTIAL_R_MULT=0.80
TRAILING_STOP_LOCK_IN_PCT=0.7
BREAKEVEN_STOP_ENABLED=true
BREAKEVEN_STOP_AT_R=1.0
BREAKEVEN_STOP_OFFSET_PCT=0.0
BREAKEVEN_WINDOW_MINUTES=0
SESSION_POLICY_ENABLED=true
SESSION_DEAD_ZONE_BLOCK=true
# Session mins should not be below global MIN_SIGNAL_SCORE/EXECUTION_MIN_SIGNAL_SCORE.
SESSION_SCORE_MIN={"asia": 0.85, "london": 0.82, "ny": 0.82, "overlap": 0.83, "dead": 1.00}
SESSION_RISK_MULTIPLIER={"asia": 1.0, "london": 1.0, "ny": 0.0, "overlap": 0.0, "dead": 0.0}
MACRO_HIGH_IMPACT_FILTER_ENABLED=false
MACRO_HIGH_IMPACT_BLOCK_ENTRIES=false
MACRO_HIGH_IMPACT_RISK_MULTIPLIER=0.55
# UTC hours (0-23), weekdays Monday=0..Sunday=6 and sessions filter (asia,london,ny,overlap,dead)
MACRO_HIGH_IMPACT_UTC_HOURS=13,14
MACRO_HIGH_IMPACT_WEEKDAYS=0,1,2,3,4
MACRO_HIGH_IMPACT_SESSIONS=ny,overlap
SIGNAL_DIRECTION_MODE=both
# Optional per-symbol direction override. Allowed values: both, long_only, short_only, disabled.
PER_INSTRUMENT_DIRECTION={}
SIGNAL_DEDUP_SECONDS=120
FUNDING_FETCH_MIN_INTERVAL_SECONDS=300
EMA_CONFLUENCE_ENABLED=false
EMA_CONFLUENCE_PERIODS=20,50,200
EMA_CONFLUENCE_BONUS=0.06
EMA_CONFLUENCE_PENALTY=0.10
EMA_CONFLUENCE_HARD_BLOCK=false

# Multi-strategy portfolio (defaults; can be overridden live via StrategyConfig feature flags)
MULTI_STRATEGY_ENABLED=true
MODULE_TREND_ENABLED=true
MODULE_MEANREV_ENABLED=true
MODULE_CARRY_ENABLED=true
ALLOCATOR_ENABLED=true
ALLOCATOR_INCLUDE_SMC=false
MODULE_SIGNAL_TTL_SECONDS=120
MODULE_IMPULSE_FILTER_ENABLED=true
MODULE_IMPULSE_LOOKBACK=20
MODULE_IMPULSE_BODY_MULT=2.2
MODULE_IMPULSE_MIN_BODY_PCT=0.006
MODULE_IMPULSE_MAX_EMA20_DIST_PCT=0.008
MODULE_MEANREV_IMPULSE_BLOCK_ENABLED=true
MODULE_CARRY_MAX_ATR_PCT=0.020
SMC_IMPULSE_CHASE_FILTER_ENABLED=true
SMC_IMPULSE_LOOKBACK=20
SMC_IMPULSE_BODY_MULT=2.0
SMC_IMPULSE_MIN_BODY_PCT=0.006
SMC_IMPULSE_MAX_EMA20_DIST_PCT=0.009
SMC_SESSION_FILTER_ENABLED=true
SMC_ALLOWED_SESSIONS=london,ny,overlap
ALLOCATOR_NET_THRESHOLD=0.20
ALLOCATOR_MODULE_WEIGHTS={"trend":0.45,"meanrev":0.30,"carry":0.15,"smc":0.10}
ALLOCATOR_MODULE_RISK_BUDGETS={"trend":0.45,"meanrev":0.30,"carry":0.15,"smc":0.10}
ALLOCATOR_MIN_MODULES_ACTIVE=2
ALLOCATOR_SMC_CONFLUENCE_BOOST_ENABLED=true
ALLOCATOR_SMC_CONFLUENCE_WEIGHT_MULT=1.25
ALLOCATOR_SMC_NON_CONFLUENCE_WEIGHT_MULT=0.85
ALLOCATOR_SMC_CONFLUENCE_MIN_SCORE=0.80
ALLOCATOR_SMC_ALLOWED_SESSIONS=london,ny,overlap
MULTI_STRATEGY_UNIVERSE=["BTCUSDT","ETHUSDT","SOLUSDT","BNBUSDT","XRPUSDT","ADAUSDT","DOGEUSDT"]
SHADOW_TRADING_ENABLED=true
LIVE_GRADUAL_ENABLED=true
LIVE_GRADUAL_MAX_MODULES=3
LIVE_GRADUAL_MAX_SYMBOLS_PER_MODULE=7

# Telegram performance report
PERFORMANCE_REPORT_ENABLED=true
PERFORMANCE_REPORT_WINDOW_MINUTES=15
# Beat scheduler for Telegram reports:
# - interval: every PERFORMANCE_REPORT_BEAT_MINUTES
# - daily: at PERFORMANCE_REPORT_BEAT_HOUR:PERFORMANCE_REPORT_BEAT_MINUTE (UTC)
PERFORMANCE_REPORT_BEAT_ENABLED=true
PERFORMANCE_REPORT_BEAT_MODE=interval
PERFORMANCE_REPORT_BEAT_MINUTES=15
PERFORMANCE_REPORT_BEAT_HOUR=0
PERFORMANCE_REPORT_BEAT_MINUTE=0
